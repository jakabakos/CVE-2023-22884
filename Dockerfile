FROM apache/airflow:2.5.0

# Environment variables
#ENV AIRFLOW__CORE__EXECUTOR=CeleryExecutor
#ENV AIRFLOW__DATABASE__SQL_ALCHEMY_CONN=postgresql+psycopg2://airflow:airflow@postgres/airflow
#ENV AIRFLOW__CORE__SQL_ALCHEMY_CONN=postgresql+psycopg2://airflow:airflow@postgres/airflow
#ENV AIRFLOW__CELERY__RESULT_BACKEND=db+postgresql://airflow:airflow@postgres/airflow
#ENV AIRFLOW__CELERY__BROKER_URL=redis://:@redis:6379/0
#ENV AIRFLOW__CORE__FERNET_KEY=''
#ENV AIRFLOW__CORE__DAGS_ARE_PAUSED_AT_CREATION=true
#ENV AIRFLOW__CORE__LOAD_EXAMPLES=true
#ENV AIRFLOW__API__AUTH_BACKENDS=airflow.api.auth.backend.basic_auth
#ENV _PIP_ADDITIONAL_REQUIREMENTS=${_PIP_ADDITIONAL_REQUIREMENTS:-}
#ENV MYSQL_ROOT_HOST=192.168.150.140

# Copy dags, logs, and plugins
#COPY ./dags /opt/airflow/dags
#COPY ./logs /opt/airflow/logs
#COPY ./plugins /opt/airflow/plugins

#RUN chmod -R 777 /opt/airflow/logs
# User configuration
#ARG AIRFLOW_UID=50000
#RUN echo 's3cr3t' > /tmp/proof
#RUN chmod 777 /tmp/proof

#USER airflow
RUN pip install apache-airflow-providers-mysql==3.4.0

#USER ${AIRFLOW_UID}:0

# Healthcheck
#HEALTHCHECK CMD ["airflow", "version"]
#VOLUME ["/opt/airflow/dags"]
